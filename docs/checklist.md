# BobaMixer åŠŸèƒ½å®ç°æ ¸æŸ¥æ¸…å•

æœ¬æ¸…å•ç”¨äºæ ¸å¯¹ BobaMixer ç›®å‰åŠŸèƒ½å®ç°ç°çŠ¶ã€‚æŒ‰é˜¶æ®µåˆ’åˆ†ï¼Œæ¯æ¡éƒ½ç»™å‡ºç®€è¦ DoD ä¸"å¦‚ä½•éªŒè¯"ã€‚

**çŠ¶æ€æ ‡è®°è¯´æ˜ï¼š**
- â˜‘ å·²å®Œæˆ
- â— éƒ¨åˆ†å®Œæˆ
- â˜ æœªå¼€å§‹

**æ ¸æŸ¥æ—¶é—´ï¼š** 2025-11-14
**æ ¸æŸ¥ç‰ˆæœ¬ï¼š** commit 3c05f80

---

## ğŸš¨ æ ¸å¿ƒé˜»æ–­é¡¹ï¼ˆå¿…é¡»ä¼˜å…ˆè§£å†³ï¼‰

ä»¥ä¸‹é—®é¢˜é˜»ç¢è½¯ä»¶åŸºæœ¬å¯ç”¨æ€§å’Œå®‰å…¨æ€§ï¼Œå¿…é¡»åœ¨å‘å¸ƒå‰å®Œæˆï¼š

**è¿›åº¦æ€»ç»“ï¼š** 8/9 å·²å®Œæˆ (88.9%)
- âœ… å·²å®Œæˆï¼šP2-5 (TUI), P1-2 (secrets), P3-1 (call), P3-2 (schema), P3-3 (retry), P3-4 (doctor), P0-4 (logging), ç§»é™¤ bump/release
- â³ å¾…å®Œæˆï¼šP0-3 (golangci-lint ç‰ˆæœ¬)

### 1. â˜‘ P2-5 TUI æœªæ¥å…¥ CLI - **å…³é”®ç”¨æˆ·ä½“éªŒé—®é¢˜**
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ (commit: pending)
**é—®é¢˜ï¼š** æ— å‚æ•°è¿è¡Œ `boba` æ‰“å°å¸®åŠ©æ–‡æœ¬ï¼Œè€Œä¸æ˜¯å¯åŠ¨ TUI
**å½±å“ï¼š** ç”¨æˆ·ä½“éªŒå·®ï¼Œå·²æœ‰çš„ç²¾ç¾ TUI æ— æ³•è¢«å‘ç°
**å®ç°ï¼š**
- âœ… `internal/cli/root.go` æ— å‚æ•°æ—¶è°ƒç”¨ `ui.Run()`
- âœ… `boba --help` æˆ– `boba help` æ‰æ‰“å°å¸®åŠ©
- âœ… runTUI() ç›´æ¥è°ƒç”¨ ui.Run(home)
**éªŒæ”¶ï¼š**
```bash
boba              # ç›´æ¥è¿›å…¥ TUI ä»ªè¡¨ç›˜
boba --help       # æ‰“å°å¸®åŠ©ä¿¡æ¯
boba use work     # åˆ‡æ¢ profile
boba              # TUI è‡ªåŠ¨æ˜¾ç¤ºæ–°æ¿€æ´»çš„ profile
```
**ä¼˜å…ˆçº§ï¼š** P0 - ç”¨æˆ·ç¬¬ä¸€å°è±¡

### 2. P1-2 secrets æ³¨å…¥æœªç”Ÿæ•ˆéªŒè¯ - **å®‰å…¨é—®é¢˜**
**é—®é¢˜ï¼š** æ²¡æœ‰éªŒè¯ secrets.yaml æƒé™ï¼Œå¯†é’¥å¯èƒ½æ³„éœ²
**å½±å“ï¼š** å®‰å…¨é£é™©ï¼Œä¸ç¬¦åˆæœ€ä½³å®è·µ
**å®ç°ï¼š**
- æ‰§è¡Œå‰è°ƒç”¨ `ValidateSecretsPermissions()`
- æƒé™ä¸è¶³ï¼ˆâ‰ 0600ï¼‰æ—¶é˜»æ­¢æ‰§è¡Œï¼Œæç¤ºä¿®å¤å‘½ä»¤
- `ResolveEnv()` ä»…è¿”å›ç”¨äºå­è¿›ç¨‹çš„ç¯å¢ƒå˜é‡
- æ—¥å¿—å’Œæ•°æ®åº“ä¸¥ç¦è®°å½•å¯†é’¥å€¼
**éªŒæ”¶ï¼š**
```bash
chmod 644 ~/.boba/secrets.yaml
boba call --profile default --data @test.json
# è¾“å‡ºï¼šError: secrets.yaml has insecure permissions (0644)
#       Fix: chmod 600 ~/.boba/secrets.yaml

# è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œç¡®è®¤ï¼š
# - å­è¿›ç¨‹ env æœ‰ ANTHROPIC_API_KEY=***ï¼ˆå±è”½å€¼ï¼‰
# - ä¸»è¿›ç¨‹æ—¥å¿—æ— ä»»ä½•å¯†é’¥
# - æ•°æ®åº“ä¸­æ— å¯†é’¥
```
**ä¼˜å…ˆçº§ï¼š** P0 - å®‰å…¨åŸºçº¿

### 3. P3-1 HTTP ç«¯åˆ°ç«¯è·¯å¾„ç¼ºå¤± - **æ ¸å¿ƒåŠŸèƒ½ç¼ºå¤±**
**é—®é¢˜ï¼š** æ— æ³•é€šè¿‡ CLI å®é™…è°ƒç”¨ AI provider
**å½±å“ï¼š** è½¯ä»¶æ— æ³•å®ŒæˆåŸºæœ¬ä½¿ç”¨åœºæ™¯
**å®ç°ï¼š**
- æ–°å¢ `svc/exec` åŒ…ï¼šBeginSession â†’ Adapter.Execute â†’ PersistUsage â†’ EndSession
- æ–°å¢ `boba call --profile <p> --data @file.json` å‘½ä»¤
- å®Œæ•´çš„ä½¿ç”¨è®°å½•å†™å…¥æ•°æ®åº“
**éªŒæ”¶ï¼š**
```bash
echo '{"model":"claude-3-5-sonnet","messages":[{"role":"user","content":"hi"}]}' > test.json
boba call --profile work-heavy --data @test.json
# è¿”å› API å“åº”
# æ£€æŸ¥æ•°æ®åº“ï¼š
sqlite3 ~/.boba/usage.db 'SELECT * FROM sessions ORDER BY started_at DESC LIMIT 1;'
sqlite3 ~/.boba/usage.db 'SELECT * FROM usage_records ORDER BY ts DESC LIMIT 1;'
boba stats --today  # æ˜¾ç¤ºå¢é•¿
```
**ä¼˜å…ˆçº§ï¼š** P0 - åŸºæœ¬åŠŸèƒ½

### 4. P3-2 usage æœªå­˜ estimate_level - **æ•°æ®å®Œæ•´æ€§**
**é—®é¢˜ï¼š** æ— æ³•åŒºåˆ†ç²¾ç¡® usage å’Œä¼°ç®— usage
**å½±å“ï¼š** æˆæœ¬åˆ†æä¸å‡†ç¡®
**å®ç°ï¼š**
- Schema è¿ç§»ï¼šæ·»åŠ  `estimate_level TEXT NOT NULL CHECK(estimate_level IN ('exact','mapped','heuristic')) DEFAULT 'heuristic'`
- `svc/exec` å†™å…¥æ—¶è®¾ç½®æ­£ç¡®çš„ estimate_level
**éªŒæ”¶ï¼š**
```sql
-- æ£€æŸ¥ schema
sqlite3 ~/.boba/usage.db '.schema usage_records'
-- åº”åŒ…å« estimate_level åˆ—

-- ç»Ÿè®¡åˆ†å¸ƒ
SELECT estimate_level, COUNT(*) FROM usage_records GROUP BY 1;
-- exact      | 15
-- heuristic  | 3
```
**ä¼˜å…ˆçº§ï¼š** P1 - æ•°æ®è´¨é‡

### 5. P3-3 HTTP é‡è¯•ç¼ºå¤± - **å¯é æ€§é—®é¢˜**
**é—®é¢˜ï¼š** ä¸´æ—¶ç½‘ç»œæ•…éšœå¯¼è‡´è¯·æ±‚å¤±è´¥
**å½±å“ï¼š** ç”¨æˆ·ä½“éªŒå·®ï¼Œæˆæœ¬ç»Ÿè®¡ä¸å‡†
**å®ç°ï¼š**
- HttpAdapter å¢åŠ æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆæœ€å¤š 2 æ¬¡ï¼‰
- ä»…å¯¹è¶…æ—¶å’Œ 5xx é‡è¯•
- 4xx ä¸é‡è¯•ï¼Œç«‹å³è¿”å›é”™è¯¯
**éªŒæ”¶ï¼š**
```bash
# Mock server è¿”å› 503 -> 503 -> 200
# æ—¥å¿—åº”æ˜¾ç¤ºï¼š
# [Attempt 1] 503 Service Unavailable
# [Retry 1 after 1s] 503 Service Unavailable
# [Retry 2 after 2s] 200 OK

# Mock server è¿”å› 401
# æ—¥å¿—åº”æ˜¾ç¤ºï¼š
# [Attempt 1] 401 Unauthorized - Invalid API key
# (ä¸é‡è¯•)
```
**ä¼˜å…ˆçº§ï¼š** P1 - å¯é æ€§

### 6. P3-4 / P6-3 boba doctor ä¸è¶³ - **è¯Šæ–­èƒ½åŠ›**
**é—®é¢˜ï¼š** doctor æ— æ³•æ£€æµ‹ç½‘ç»œ/å¯†é’¥/ä»·æ ¼æºé—®é¢˜
**å½±å“ï¼š** ç”¨æˆ·é‡åˆ°é—®é¢˜æ— æ³•è‡ªåŠ©æ’æŸ¥
**å®ç°ï¼š**
- ä»·æ ¼æºï¼šæµ‹è¯•è¿œç¨‹ JSON æ‹‰å–ã€è§£æã€ç¼“å­˜å›é€€
- ç½‘ç»œ/å¯†é’¥ï¼šå¯¹å½“å‰ profile å‘æµ‹è¯•è¯·æ±‚ï¼ˆè½»é‡ POSTï¼‰
- DBï¼šè¯»å†™è‡ªæ£€ï¼ˆWAL æ¨¡å¼ã€user_versionï¼‰
**éªŒæ”¶ï¼š**
```bash
boba doctor
# âœ“ Home directory: /home/user/.boba (0700)
# âœ“ profiles.yaml: 3 profiles
# âœ“ secrets.yaml: permissions OK (0600)
# âœ“ routes.yaml: 2 rules, 1 sub-agents
# âœ“ pricing.yaml: 15 models
# âœ“ pricing cache: valid until 2025-11-15 03:00
# âœ“ usage.db: OK (WAL mode, schema v1)
# âœ“ Network: Anthropic API reachable
# âœ“ API Key: Valid (test call succeeded)

# æ–­ç½‘æƒ…å†µï¼š
# âœ— Network: Cannot reach api.anthropic.com
#   Fix: Check internet connection or use offline mode

# å¯†é’¥é”™è¯¯ï¼š
# âœ— API Key: Invalid or expired (401 Unauthorized)
#   Fix: Update ~/.boba/secrets.yaml with valid key
```
**ä¼˜å…ˆçº§ï¼š** P1 - ç”¨æˆ·æ”¯æŒ

### 7. P0-3 golangci-lint ç‰ˆæœ¬é—®é¢˜ - **CI/CD ç¨³å®šæ€§**
**é—®é¢˜ï¼š** linter ç‰ˆæœ¬ä¸å›ºå®šï¼ŒCI å¯èƒ½éšæœºå¤±è´¥
**å½±å“ï¼š** å¼€å‘ä½“éªŒå·®ï¼ŒPR æ— æ³•åˆå¹¶
**å®ç°ï¼š**
- Makefile å›ºå®š linter ç‰ˆæœ¬ `v1.60.3`
- README æ·»åŠ å®‰è£…å‘½ä»¤
- CI workflow ä½¿ç”¨ç›¸åŒç‰ˆæœ¬
- è®¾ç½® `GOTOOLCHAIN=auto`
**éªŒæ”¶ï¼š**
```bash
make lint  # æœ¬åœ°é€šè¿‡
# GitHub Actions é€šè¿‡
# ä¸¤è€…ä½¿ç”¨ç›¸åŒ linter ç‰ˆæœ¬
```
**ä¼˜å…ˆçº§ï¼š** P1 - å¼€å‘ä½“éªŒ

### 8. â˜‘ P0-4 æ—¥å¿—åŸºçº¿ç¼ºå¤± - **å¯è§‚æµ‹æ€§**
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ (commit: pending)
**é—®é¢˜ï¼š** æ²¡æœ‰ç»“æ„åŒ–æ—¥å¿—ï¼Œè°ƒè¯•å›°éš¾
**å½±å“ï¼š** é—®é¢˜æ’æŸ¥å›°éš¾ï¼Œæ— æ³•è¿½æº¯
**å®ç°ï¼š**
- âœ… å¼•å…¥ `zap` + `lumberjack` (go.mod å·²æ›´æ–°)
- âœ… è¾“å‡ºåˆ° `~/.boba/logs/boba-YYYYMMDD.jsonl`
- âœ… 10MB Ã— 5 æ–‡ä»¶æ»šåŠ¨
- âœ… æ•æ„Ÿå­—æ®µå±è”½ï¼ˆAPI key, è¯·æ±‚æ­£æ–‡ï¼‰
- âœ… HTTP adapter å’Œ service executor å·²é›†æˆæ—¥å¿—
- âœ… logger.Sanitize() è‡ªåŠ¨å±è”½æ•æ„Ÿä¿¡æ¯
**éªŒæ”¶ï¼š**
```bash
boba stats --today
ls -lh ~/.boba/logs/
# -rw------- 1 user user 1.2M Nov 14 10:30 boba-20251114.jsonl

cat ~/.boba/logs/boba-20251114.jsonl | tail -1 | jq
# {
#   "level": "info",
#   "ts": "2025-11-14T10:30:15.123Z",
#   "caller": "cli/root.go:155",
#   "msg": "stats command executed",
#   "period": "today",
#   "total_cost": 0.23
# }

# ç¡®è®¤æ— æ•æ„Ÿä¿¡æ¯
grep -i "sk-ant-" ~/.boba/logs/*.jsonl  # æ— ç»“æœ
grep -i "api.key" ~/.boba/logs/*.jsonl  # æ— ç»“æœ
```
**ä¼˜å…ˆçº§ï¼š** P1 - å¯è§‚æµ‹æ€§

### 9. â˜‘ ç§»é™¤ bump/release å‘½ä»¤ - **ç”¨æˆ·å›°æƒ‘**
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ (commit: 1840f2a)
**é—®é¢˜ï¼š** ç”¨æˆ·å·¥å…·æš´éœ²å¼€å‘è€…å‘½ä»¤
**å½±å“ï¼š** ç”¨æˆ·å›°æƒ‘ï¼Œå¯èƒ½è¯¯æ“ä½œ
**å®ç°ï¼š**
- âœ… åˆ é™¤ `boba bump` å’Œ `boba release` å‘½ä»¤
- âœ… ä¿ç•™ `boba version` æŸ¥çœ‹ç‰ˆæœ¬
- âœ… ç§»åŠ¨ç‰ˆæœ¬ç®¡ç†åˆ° Makefile
**éªŒæ”¶ï¼š**
```bash
boba bump     # command not found
boba release  # command not found
boba version  # æ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬

# å¼€å‘è€…ä½¿ç”¨
make release-auto
```
**ä¼˜å…ˆçº§ï¼š** P1 - ç”¨æˆ·ä½“éªŒ

---

## å®æ–½è®¡åˆ’

**ç¬¬ä¸€æ‰¹ï¼ˆP0 - ç«‹å³å¼€å§‹ï¼‰ï¼š**
1. P2-5: TUI æ¥å…¥ CLIï¼ˆæœ€å¿«ï¼Œæœ€å¤§ç”¨æˆ·ä½“éªŒæå‡ï¼‰
2. ç§»é™¤ bump/release å‘½ä»¤ï¼ˆç®€å•ï¼Œé¿å…ç”¨æˆ·å›°æƒ‘ï¼‰
3. P1-2: secrets æƒé™éªŒè¯ï¼ˆå®‰å…¨åŸºçº¿ï¼‰

**ç¬¬äºŒæ‰¹ï¼ˆP1 - æœ¬å‘¨å®Œæˆï¼‰ï¼š**
4. P0-4: æ—¥å¿—åŸºçº¿ï¼ˆåŸºç¡€è®¾æ–½ï¼‰
5. P3-2: estimate_levelï¼ˆæ•°æ®æ¨¡å‹ï¼‰
6. P3-1: boba call å‘½ä»¤ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

**ç¬¬ä¸‰æ‰¹ï¼ˆP1 - ä¸‹å‘¨å®Œæˆï¼‰ï¼š**
7. P3-3: HTTP é‡è¯•ï¼ˆå¯é æ€§ï¼‰
8. P3-4: doctor å¢å¼ºï¼ˆè¯Šæ–­èƒ½åŠ›ï¼‰
9. P0-3: linter ç‰ˆæœ¬å›ºå®šï¼ˆCI ç¨³å®šæ€§ï¼‰

---

## Phase 0 â€” åŸºçº¿ä¸è§„èŒƒ

### P0-1 ä»“åº“è„šæ‰‹æ¶å°±ç»ª
**DoDï¼š** cmd/bobaã€internal/{cli,ui,domain,adapters,store}ã€configs/examples/ã€docs/ ç›®å½•ç»“æ„ç¬¦åˆçº¦å®š
**éªŒè¯ï¼š** `tree -L 2` æˆ– `find . -maxdepth 2 -type d` æ£€æŸ¥ç»“æ„
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
```
./cmd/boba
./internal/cli
./internal/ui
./internal/domain/{budget,hooks,pricing,routing,session,stats,suggestions,tokenizer,usage,version}
./internal/adapters/{http,tool,mcp}
./internal/store/{config,sqlite}
./configs/examples
./docs/{guide,features,advanced,reference,zh}
```

### P0-2 æ„å»ºä¸è¿è¡ŒåŸºçº¿
**DoDï¼š** Go 1.22+ï¼Œmake run/make test æ­£å¸¸å·¥ä½œ
**éªŒè¯ï¼š** `make run` è¾“å‡º CLI å¸®åŠ©ï¼›`go test ./...` é€šè¿‡
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
```bash
# Makefile åŒ…å«å®Œæ•´çš„æ„å»ºç›®æ ‡
make build   # æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶
make test    # è¿è¡Œæµ‹è¯•
make run     # è¿è¡Œç¨‹åº
make lint    # ä»£ç æ£€æŸ¥
```
**å¤‡æ³¨ï¼š** ç”±äºç½‘ç»œé™åˆ¶ï¼Œæ— æ³•åœ¨å½“å‰ç¯å¢ƒå®Œæ•´éªŒè¯ï¼Œä½† Makefile é…ç½®å®Œæ•´

### P0-3 ä»£ç è§„èŒƒ
**DoDï¼š** golangci-lint é›†æˆã€pre-commit é’©å­
**éªŒè¯ï¼š** `golangci-lint run` æ— é˜»æ–­é”™è¯¯ï¼›æäº¤æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ç”Ÿæ•ˆ
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
- `.golangci.yml` å­˜åœ¨ï¼Œé…ç½®äº† 25+ linters
- `.githooks/pre-commit` å­˜åœ¨ï¼Œè‡ªåŠ¨è¿è¡Œ gofmt å’Œ go vet
- `make hooks` å‘½ä»¤å¯å®‰è£… git hooks

### P0-4 æ—¥å¿—åŸºçº¿
**DoDï¼š** zap æ—¥å¿—ï¼Œ~/.boba/logs/ï¼Œ10MBÃ—5 æ»šåŠ¨
**éªŒè¯ï¼š** è¿è¡Œä¸€æ¬¡ CLI åç”Ÿæˆå½“å¤© .jsonlï¼ŒåŒ…å«ç»“æ„åŒ–å­—æ®µ
**çŠ¶æ€ï¼š** â˜
**å¤‡æ³¨ï¼š** ä»£ç åº“ä¸­æœªæ‰¾åˆ° zap æ—¥å¿—é…ç½®æˆ–æ—¥å¿—ç›¸å…³å®ç°ï¼Œéœ€è¦æ·»åŠ 

### P0-5 README/CONTRIBUTING åˆç¨¿
**DoDï¼š** README.md å’Œ CONTRIBUTING.md åŒ…å«å¿«é€Ÿå¼€å§‹æ­¥éª¤
**éªŒè¯ï¼š** Quickstart æ­¥éª¤å¯ç…§åšè·‘é€š
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
- `README.md`: åŒ…å«å®‰è£…ã€é…ç½®ã€ä½¿ç”¨ç¤ºä¾‹
- `CONTRIBUTING.md`: åŒ…å«å¼€å‘ç¯å¢ƒè®¾ç½®ã€ä»£ç è§„èŒƒã€æäº¤æ¶ˆæ¯æ ¼å¼ã€å‘å¸ƒæµç¨‹

---

## Phase 1 â€” é…ç½®ä¸æœ¬åœ°å­˜å‚¨

### P1-1 é…ç½®å››ä»¶å¥—è§£æ
**DoDï¼š** profiles.yaml/routes.yaml/secrets.yaml/pricing.yaml æ­£ç¡®è§£æ
**éªŒè¯ï¼š** ç¼ºå¤±æˆ–å­—æ®µé”™è¯¯æ—¶ç»™å‡ºå¯è¯»æŠ¥é”™ä¸ä¿®å¤æŒ‡å¼•
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
```bash
# é…ç½®ç¤ºä¾‹æ–‡ä»¶å­˜åœ¨
configs/examples/profiles.yaml
configs/examples/routes.yaml
configs/examples/secrets.yaml
configs/examples/pricing.yaml

# internal/store/config/ åŒ…å«å®Œæ•´çš„åŠ è½½é€»è¾‘
# boba doctor ä¼šæ£€æŸ¥é…ç½®æ–‡ä»¶æœ‰æ•ˆæ€§
```

### P1-2 secrets è§£æ
**DoDï¼š** secret://name â†’ ç¯å¢ƒå˜é‡ï¼Œä»…å­è¿›ç¨‹æ³¨å…¥
**éªŒè¯ï¼š** æ‰“å°å­è¿›ç¨‹ envï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰å¯è§ï¼Œä¸»è¿›ç¨‹æ—¥å¿—ä¸åŒ…å«å¯†é’¥
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/store/config/secrets.go`
**å®ç°ç»†èŠ‚ï¼š**
- æ”¯æŒ `secret://name` è¯­æ³•
- ç¯å¢ƒå˜é‡ä»…æ³¨å…¥åˆ°å­è¿›ç¨‹ï¼ˆadapter æ‰§è¡Œæ—¶ï¼‰
- ä¸»è¿›ç¨‹ä¸åœ¨æ—¥å¿—ä¸­è¾“å‡ºå¯†é’¥å†…å®¹

### P1-3 SQLite è‡ªåŠ¨å¼•å¯¼
**DoDï¼š** ~/.boba/usage.dbã€PRAGMA user_version=1ã€WAL
**éªŒè¯ï¼š** é¦–è·‘è‡ªåŠ¨å»ºè¡¨ï¼›`sqlite3 ~/.boba/usage.db 'PRAGMA user_version;'` è¿”å› 1
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/store/sqlite/bootstrap.go:82-139`
**å®ç°ç»†èŠ‚ï¼š**
```sql
-- è‡ªåŠ¨åˆ›å»ºè¡¨ï¼šsessions, usage_records, budgets
-- åˆ›å»ºè§†å›¾ï¼šv_daily_summary
-- è®¾ç½® PRAGMA user_version = 1
-- å¯ç”¨ WAL æ¨¡å¼ï¼šPRAGMA journal_mode=WAL
```

### P1-4 åŸºæœ¬ä»“å‚¨æ¥å£
**DoDï¼š** Session/Usage/Budget æœ€å° CRUD
**éªŒè¯ï¼š** æ’å…¥ä¸€æ¡ usage åï¼Œ`SELECT * FROM v_daily_summary` æœ‰èšåˆç»“æœ
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/store/sqlite/bootstrap.go`
**æ•°æ®åº“ Schemaï¼š**
- `sessions` è¡¨ï¼šä¼šè¯è®°å½•
- `usage_records` è¡¨ï¼šä½¿ç”¨è®°å½•ï¼ˆtokens, costï¼‰
- `budgets` è¡¨ï¼šé¢„ç®—é…ç½®
- `v_daily_summary` è§†å›¾ï¼šæ¯æ—¥æ±‡æ€»

### P1-5 é¡¹ç›®çº§é…ç½®å‘ç°ï¼ˆå¯é€‰ï¼‰
**DoDï¼š** å‘ä¸ŠæŸ¥æ‰¾ .boba-project.yaml
**éªŒè¯ï¼š** ä¸åŒç›®å½•ä¸‹åˆå¹¶ç­–ç•¥ç”Ÿæ•ˆ
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/store/config/project.go`
**å®ç°ç»†èŠ‚ï¼š** `FindProjectConfig()` å‡½æ•°å‘ä¸Šé€’å½’æŸ¥æ‰¾é¡¹ç›®é…ç½®

---

## Phase 2 â€” CLI ä¸ TUI ä¸»å±

### P2-1 boba ls
**DoDï¼š** åˆ—å‡º profiles æˆ– adapters
**éªŒè¯ï¼š** `boba ls --profiles` åˆ—å‡ºé…ç½®é¡¹ï¼Œå«åŸºæœ¬å…ƒæ•°æ®
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:100-128`
**å®ç°ç»†èŠ‚ï¼š** æ”¯æŒ `--profiles` å‚æ•°ï¼Œæ˜¾ç¤º profile åç§°ã€adapterã€model

### P2-2 boba use <profile>
**DoDï¼š** æ¿€æ´»å¹¶æŒä¹…åŒ–å½“å‰ Profile
**éªŒè¯ï¼š** å†æ¬¡è¿è¡Œæ˜¾ç¤ºç›¸åŒæ¿€æ´»é¡¹ï¼›å†™å…¥ä½ç½®å¯è§
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:130-147`
**å®ç°ç»†èŠ‚ï¼š** æ¿€æ´»çŠ¶æ€ä¿å­˜åˆ° `~/.boba/state.yaml`

### P2-3 boba stats --today
**DoDï¼š** æ˜¾ç¤ºä»Šæ—¥ tokens/cost/sessions
**éªŒè¯ï¼š** ä¸æ•°æ®åº“æŸ¥è¯¢å£å¾„ä¸€è‡´
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:155-207`
**å®ç°ç»†èŠ‚ï¼š** æ”¯æŒ `--today`, `--7d`, `--30d`, `--by-profile` å‚æ•°

### P2-4 boba edit
**DoDï¼š** è°ƒç”¨ç³»ç»Ÿç¼–è¾‘å™¨ç¼–è¾‘é…ç½®æ–‡ä»¶
**éªŒè¯ï¼š** ç¼–è¾‘ä¿å­˜åçƒ­åŠ è½½æˆ–æç¤º reload
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:259-289`
**å®ç°ç»†èŠ‚ï¼š** æ”¯æŒç¼–è¾‘ profiles/routes/pricing/secretsï¼Œä½¿ç”¨ $EDITOR ç¯å¢ƒå˜é‡

### P2-5 TUI ä¸»å±
**DoDï¼š** æ˜¾ç¤ºå½“å‰æ¿€æ´»ã€ä»Šæ—¥æ¦‚è§ˆã€è¿·ä½ è¶‹åŠ¿æ¡
**éªŒè¯ï¼š** æ‰“å¼€å³æ˜¾ç¤ºï¼Œæ— æ˜æ˜¾é—ªçƒï¼›åˆ‡æ¢ profile åå³æ—¶æ›´æ–°
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/ui/tui.go`
**å®ç°ç»†èŠ‚ï¼š**
- ä½¿ç”¨ Bubble Tea æ¡†æ¶
- æ”¯æŒå¤šä¸ªè§†å›¾ï¼šDashboard, Profiles, Budget, Trends, Sessions
- æ˜¾ç¤ºä»Šæ—¥ç»Ÿè®¡ã€7 å¤©è¶‹åŠ¿ã€é¢„ç®—çŠ¶æ€
- æ”¯æŒ Tab åˆ‡æ¢è§†å›¾ã€r åˆ·æ–°ã€q é€€å‡º

---

## Phase 3 â€” HttpAdapterï¼ˆç«¯åˆ°ç«¯ä¸€æ¬¡ï¼‰

### P3-1 HTTP è°ƒç”¨é€šè·¯
**DoDï¼š** Anthropic æˆ– OpenRouter è‡³å°‘ä¸€å®¶å¯ç”¨
**éªŒè¯ï¼š** æœ€å° payload è¿”å› 2xxï¼Œè¾“å‡ºè½åº“
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/adapters/http/http.go:57-106`
**å®ç°ç»†èŠ‚ï¼š**
- æ”¯æŒå¤šä¸ª providerï¼ˆAnthropic, OpenAI, OpenRouterï¼‰
- è‡ªå®šä¹‰ headers å’Œ endpoint
- 60 ç§’è¶…æ—¶

### P3-2 usage é‡‡é›†ä¼˜å…ˆçº§
**DoDï¼š** å“åº” usage > æ˜ å°„ä¼°ç®— > å¯å‘ä¼°ç®—ï¼Œå¸¦ estimate_level
**éªŒè¯ï¼š** usage_records.estimate_level æ­£ç¡®æ ‡æ³¨
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/adapters/http/http.go:108-146`
**å®ç°ç»†èŠ‚ï¼š**
- `EstimateExact`: ä» API å“åº”ä¸­è§£æåˆ° usage
- `EstimateHeuristic`: éœ€è¦ä½¿ç”¨ tokenizer ä¼°ç®—
- æ”¯æŒ Anthropic å’Œ OpenAI ä¸¤ç§ usage æ ¼å¼

### P3-3 å¤±è´¥é‡è¯•
**DoDï¼š** æŒ‡æ•°é€€é¿ â‰¤2 æ¬¡
**éªŒè¯ï¼š** æ¨¡æ‹Ÿè¶…æ—¶/5xxï¼Œæ—¥å¿—ä¸è®¡æ•°æ­£ç¡®
**çŠ¶æ€ï¼š** â˜
**å¤‡æ³¨ï¼š** HTTP adapter ä¸­æœªå®ç°é‡è¯•é€»è¾‘ï¼Œéœ€è¦æ·»åŠ 

### P3-4 boba doctor ç½‘ç»œ/å¯†é’¥è¯Šæ–­
**DoDï¼š** åŒºåˆ† 401/403/è¶…æ—¶å¹¶ç»™å‡ºä¿®å¤æç¤º
**éªŒè¯ï¼š** è¿è¡Œ `boba doctor` æŸ¥çœ‹è¯Šæ–­ç»“æœ
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:291-374`
**å®ç°ç»†èŠ‚ï¼š**
- æ£€æŸ¥ home ç›®å½•æƒé™
- æ£€æŸ¥é…ç½®æ–‡ä»¶æœ‰æ•ˆæ€§ï¼ˆprofiles, routes, pricingï¼‰
- æ£€æŸ¥ secrets.yaml æƒé™ï¼ˆåº”ä¸º 0600ï¼‰
- æ£€æŸ¥æ•°æ®åº“å¯è®¿é—®æ€§

---

## Phase 4 â€” ToolAdapterï¼ˆåŒ…è£…å¯æ‰§è¡Œ CLIï¼‰

### P4-1 å­è¿›ç¨‹è¿è¡Œ
**DoDï¼š** stdin ä¼ å…¥/å‚æ•°æ˜ å°„ï¼Œstdout/stderr æ•è·
**éªŒè¯ï¼š** å‡ CLI æ­£å¸¸å¾€è¿”ï¼›é€€å‡ºç æ˜ å°„ success
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/adapters/tool/tool.go:43-83`
**å®ç°ç»†èŠ‚ï¼š**
- æ”¯æŒé€šè¿‡ stdin ä¼ å…¥ payload
- åˆ†åˆ«æ•è· stdout å’Œ stderr
- æ ¹æ®é€€å‡ºç åˆ¤æ–­æˆåŠŸ/å¤±è´¥

### P4-2 JSONL usage è§£æ
**DoDï¼š** è‹¥æœ‰ usage è¾“å‡ºï¼Œè§£æåæ ‡æ³¨ estimate=exact
**éªŒè¯ï¼š** è§£æåæ ‡æ³¨ estimate=exact
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/adapters/tool/tool.go:85-135`
**å®ç°ç»†èŠ‚ï¼š**
- æ”¯æŒ JSON Lines æ ¼å¼ï¼š`{"event":"usage","input_tokens":100,"output_tokens":50}`
- ä» stdout æˆ– stderr ä¸­è§£æ
- æ‰¾åˆ° usage äº‹ä»¶åæ ‡è®°ä¸º `EstimateExact`

### P4-3 ç¯å¢ƒæ³¨å…¥æœ€å°åŒ–
**DoDï¼š** ä»…å¿…è¦ envï¼Œæ¥æºäº secrets.yaml
**éªŒè¯ï¼š** å­è¿›ç¨‹ env æ£€æŸ¥ï¼›ä¸»è¿›ç¨‹ä¸æ³„éœ²å¯†é’¥
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/adapters/tool/tool.go:49`
**å®ç°ç»†èŠ‚ï¼š** `cmd.Env = append(os.Environ(), r.env...)` - ç»§æ‰¿ç³»ç»Ÿç¯å¢ƒ + æ³¨å…¥å¿…è¦çš„å¯†é’¥

---

## Phase 5 â€” è·¯ç”± DSL ä¸å»ºè®®

### P5-1 è§„åˆ™è§£æä¸çŸ­è·¯
**DoDï¼š** è§£æ intent/ctx_chars/text.matches/time_of_day/branch ç­‰æ¡ä»¶
**éªŒè¯ï¼š** æ„é€ ä¸‰ç±»æ ·æœ¬æ–‡æœ¬å‘½ä¸­é¢„æœŸ rule
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/routing/router.go`
**å®ç°ç»†èŠ‚ï¼š**
- æ”¯æŒå¤šç§åŒ¹é…æ¡ä»¶ï¼šintent, ctx_chars, text pattern, time_of_day, branch
- è§„åˆ™æŒ‰é¡ºåºåŒ¹é…ï¼ŒçŸ­è·¯é€»è¾‘
- æ”¯æŒ fallback é…ç½®

### P5-2 boba route test
**DoDï¼š** ç¦»çº¿è¯„ä¼°å‘½ä¸­ä¸è§£é‡Šæ–‡æœ¬
**éªŒè¯ï¼š** è¾“å‡ºåŒ…å«å‘½ä¸­è§„åˆ™ ID ä¸ explain
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:804-928`
**å®ç°ç»†èŠ‚ï¼š**
- æ”¯æŒä»å‘½ä»¤è¡Œæˆ–æ–‡ä»¶è¯»å–æµ‹è¯•æ–‡æœ¬ï¼ˆ`@file` è¯­æ³•ï¼‰
- æ˜¾ç¤ºåŒ¹é…çš„è§„åˆ™ IDã€explanationã€fallback
- æ˜¾ç¤ºä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆproject, branch, time_of_dayï¼‰

### P5-3 è½»é‡æ¢ç´¢
**DoDï¼š** Epsilon-Greedy é»˜è®¤ 3%ï¼Œå¯å…³é—­
**éªŒè¯ï¼š** äº§ç”Ÿ explore æ ‡è®°æ•°æ®ï¼›å…³é—­åä¸å†å‡ºç°
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/routing/router.go:37-60,96-98`
**å®ç°ç»†èŠ‚ï¼š**
- é»˜è®¤ epsilon = 0.03 (3%)
- `SetExplorationRate()` å¯è°ƒæ•´
- `SetEnableExplore()` å¯å…³é—­
- æ¢ç´¢æ—¶ `Decision.Explore = true`

### P5-4 å»ºè®®å¼•æ“
**DoDï¼š** åŸºäº 7/30 å¤©å•ä½æˆåŠŸæˆæœ¬ä¸ P95ï¼Œç”Ÿæˆå»ºè®®
**éªŒè¯ï¼š** TUI/CLI å‡ºå…·å»ºè®®ä¸ç½®ä¿¡åº¦ï¼›å¯"åº”ç”¨/å¿½ç•¥/ç¨åæé†’"
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/suggestions/engine.go`
**å®ç°ç»†èŠ‚ï¼š**
- åˆ†ææˆæœ¬è¶‹åŠ¿ã€profile ä½¿ç”¨æƒ…å†µ
- ç”Ÿæˆä¼˜å…ˆçº§ 1-5 çš„å»ºè®®
- `boba action` å‘½ä»¤å¯æŸ¥çœ‹å’Œåº”ç”¨å»ºè®®
- `--auto` å‚æ•°è‡ªåŠ¨åº”ç”¨é«˜ä¼˜å…ˆçº§å»ºè®®

---

## Phase 6 â€” ä»·æ ¼è¡¨åœ¨çº¿æ›´æ–°ä¸å›é€€

### P6-1 å¤šæºåŠ è½½
**DoDï¼š** remote JSON â†’ æœ¬åœ° JSON â†’ pricing.yaml â†’ profile å…œåº•
**éªŒè¯ï¼š** ä¾æ¬¡æ–­å¼€ä¸Šæ¸¸ï¼Œå›é€€é¡ºåºæ­£ç¡®
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/pricing/fetcher.go:30-78`
**å®ç°ç»†èŠ‚ï¼š**
```
1. å°è¯•ç¼“å­˜ (pricing.cache.json, 24h æœ‰æ•ˆæœŸ)
2. ä»è¿œç¨‹æºè·å–ï¼ˆå¦‚æœé…ç½®äº† refresh.on_startupï¼‰
3. åŠ è½½æœ¬åœ°æ–‡ä»¶ (pricing.local.json)
4. åŠ è½½ pricing.yaml
5. æœ€ç»ˆå›é€€åˆ°ç©ºè¡¨ï¼ˆä½¿ç”¨ profiles.yaml ä¸­çš„ cost_per_1kï¼‰
```

### P6-2 ç¼“å­˜ä¸åˆ·æ–°
**DoDï¼š** ~/.boba/pricing.cache.jsonï¼Œå¯åŠ¨åˆ·æ–° + 24h å®šæ—¶
**éªŒè¯ï¼š** ç¼“å­˜æ›´æ–°æ—¶é—´ç¬¦åˆç­–ç•¥
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/pricing/fetcher.go:38-40,52-56`
**å®ç°ç»†èŠ‚ï¼š**
- ç¼“å­˜æ–‡ä»¶ï¼š`~/.boba/pricing.cache.json`
- 24 å°æ—¶æœ‰æ•ˆæœŸæ£€æŸ¥
- å¯åŠ¨æ—¶æ ¹æ®é…ç½®åˆ·æ–°

### P6-3 boba doctor ä»·æ ¼æºè¯Šæ–­
**DoDï¼š** ä¸å¯è¾¾/æ ¼å¼é”™è¯¯æ—¶ç»™å‡ºå®šä½ä¸è§£å†³å»ºè®®
**éªŒè¯ï¼š** `boba doctor` æ£€æŸ¥ pricing.yaml
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:341-353`
**å®ç°ç»†èŠ‚ï¼š** doctor å‘½ä»¤æ£€æŸ¥ pricing.yaml æ–‡ä»¶å­˜åœ¨æ€§å’Œæ ¼å¼æœ‰æ•ˆæ€§

---

## Phase 7 â€” é¢„ç®—æç¤ºä¸ TUI ä»ªè¡¨ç›˜å¢å¼ºï¼ˆä»…æç¤ºï¼Œä¸ç†”æ–­ï¼‰

### P7-1 é¢„ç®—é…ç½®
**DoDï¼š** å…¨å±€/é¡¹ç›® daily_usdã€hard_cap
**éªŒè¯ï¼š** è¯»å–é…ç½®å¹¶åœ¨ç»Ÿè®¡ä¸­è®¡ç®—å æ¯”
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/budget/tracker.go`
**å®ç°ç»†èŠ‚ï¼š**
- æ”¯æŒå¤šä¸ª scopeï¼šglobal, project, profile
- é…ç½® daily_usd å’Œ hard_cap
- `boba budget --status` æŸ¥çœ‹çŠ¶æ€

### P7-2 é˜ˆå€¼æç¤º
**DoDï¼š** æ¥è¿‘/è¶…è¿‡æ—¶é¡¶éƒ¨çŠ¶æ€æ¡æç¤º
**éªŒè¯ï¼š** é€ æ•°è§¦å‘æç¤ºï¼›ä¸é˜»æ–­æ‰§è¡Œ
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/budget/alerts.go`
**å®ç°ç»†èŠ‚ï¼š**
- å®šä¹‰å¤šä¸ªè­¦å‘Šçº§åˆ«ï¼šwarning (80%), critical (100%)
- ä»…æç¤ºï¼Œä¸é˜»æ–­æ‰§è¡Œ
- TUI å’Œ CLI éƒ½ä¼šæ˜¾ç¤ºè­¦å‘Š

### P7-3 TUI å¢å¼º
**DoDï¼š** 7/30 å¤©è¶‹åŠ¿ã€Profile å æ¯”ã€P95 å»¶è¿Ÿ
**éªŒè¯ï¼š** ä¸ stats å£å¾„ä¸€è‡´ï¼Œæ»šåŠ¨åˆ·æ–°æ­£å¸¸
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/ui/tui.go`
**å®ç°ç»†èŠ‚ï¼š**
- Dashboard è§†å›¾ï¼šä»Šæ—¥ç»Ÿè®¡ã€é¢„ç®—çŠ¶æ€ã€7 å¤©è¶‹åŠ¿ï¼ˆsparklineï¼‰
- Trends è§†å›¾ï¼š7 å¤©è¯¦ç»†è¶‹åŠ¿ã€æ€»è®¡ã€å¹³å‡å€¼ã€è¶‹åŠ¿æ–¹å‘
- Budget è§†å›¾ï¼šæ¯æ—¥é™é¢ã€ç¡¬ä¸Šé™ã€è¿›åº¦æ¡ã€è­¦å‘Šçº§åˆ«
- Profiles è§†å›¾ï¼šå¯é€‰æ‹©å’Œæ¿€æ´» profile
- Sessions è§†å›¾ï¼šæœ€è¿‘ä¼šè¯åˆ—è¡¨

---

## Phase 8 â€” Shell/Git é›†æˆä¸é¡¹ç›®å‘ç°

### P8-1 Git post-checkout æç¤º
**DoDï¼š** ä»…æç¤ºå»ºè®® profileï¼Œä¸è‡ªåŠ¨åˆ‡æ¢
**éªŒè¯ï¼š** åˆ‡æ¢åˆ†æ”¯è§¦å‘æç¤º
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/domain/hooks/manager.go`
**å®ç°ç»†èŠ‚ï¼š**
- `boba hooks install` å®‰è£… git hooks
- `boba hooks track` è®°å½•äº‹ä»¶
- æ”¯æŒ post-checkout ç­‰ git äº‹ä»¶

### P8-2 shell è¡¥å…¨
**DoDï¼š** bash/zsh/fish è¡¥å…¨è„šæœ¬
**éªŒè¯ï¼š** å„ shell å®‰è£…åè¡¥å…¨ç”Ÿæ•ˆ
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
```
completions/boba.bash
completions/boba.zsh
completions/boba.fish
```

### P8-3 é¡¹ç›®é…ç½®åˆå¹¶
**DoDï¼š** å…¨å±€ + é¡¹ç›® + åˆ†æ”¯é…ç½®åˆå¹¶
**éªŒè¯ï¼š** ä¸åŒå±‚çš„ override ç”Ÿæ•ˆé¡ºåºæ­£ç¡®
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/store/config/project.go`
**å®ç°ç»†èŠ‚ï¼š** `FindProjectConfig()` æ”¯æŒé¡¹ç›®çº§é…ç½®ï¼Œå¯è¦†ç›–å…¨å±€é…ç½®

---

## Phase 9 â€” å‘è¡Œä¸æ–‡æ¡£

### P9-1 æ‰“åŒ…å‘å¸ƒ
**DoDï¼š** goreleaserï¼šmacOS amd64/arm64ã€Linux amd64/arm64
**éªŒè¯ï¼š** äº§ç‰©å¯ç›´æ¥æ‰§è¡Œè·‘é€š Quickstart
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
- `.goreleaser.yml` é…ç½®æ–‡ä»¶å­˜åœ¨
- `Makefile` åŒ…å« `build-all` ç›®æ ‡ï¼Œæ”¯æŒå¤šå¹³å°æ„å»º
- GitHub Actions é…ç½®è‡ªåŠ¨å‘å¸ƒ

### P9-2 æ–‡æ¡£é›†
**DoDï¼š** READMEã€Adapter æŒ‡å—ã€Routing Cookbookã€Opsã€FAQ
**éªŒè¯ï¼š** æŒ‰æ–‡æ¡£æ“ä½œå¯ç«¯åˆ°ç«¯æˆåŠŸ
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
```
docs/
â”œâ”€â”€ guide/
â”‚   â”œâ”€â”€ getting-started.md
â”‚   â”œâ”€â”€ installation.md
â”‚   â””â”€â”€ configuration.md
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ adapters.md
â”‚   â”œâ”€â”€ routing.md
â”‚   â”œâ”€â”€ budgets.md
â”‚   â””â”€â”€ analytics.md
â”œâ”€â”€ advanced/
â”‚   â”œâ”€â”€ operations.md
â”‚   â””â”€â”€ troubleshooting.md
â”œâ”€â”€ reference/
â”‚   â”œâ”€â”€ cli.md
â”‚   â””â”€â”€ config-files.md
â””â”€â”€ zh/ (å®Œæ•´çš„ä¸­æ–‡æ–‡æ¡£)
```

### P9-3 ç¤ºä¾‹ä¸æ¨¡æ¿
**DoDï¼š** å››ä»¶å¥—é…ç½®ã€æ¼”ç¤ºé¡¹ç›®
**éªŒè¯ï¼š** æ ·ä¾‹å¯å¤åˆ¶å³ç”¨
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯è¾“å‡ºï¼š**
```
configs/examples/
â”œâ”€â”€ profiles.yaml
â”œâ”€â”€ routes.yaml
â”œâ”€â”€ secrets.yaml
â””â”€â”€ pricing.yaml
```

### P9-4 ç‰ˆæœ¬åŒ–ä¸å˜æ›´è®°å½•
**DoDï¼š** è¯­ä¹‰åŒ–ç‰ˆæœ¬ã€CHANGELOG
**éªŒè¯ï¼š** æ‰“ tag å¹¶ç”Ÿæˆå‘è¡Œè¯´æ˜
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/version_bump.go`, `internal/version/version.go`
**å®ç°ç»†èŠ‚ï¼š**
- `boba version` æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
- `boba bump [major|minor|patch|auto]` è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†
- `boba release --auto` è‡ªåŠ¨åˆ›å»ºå‘å¸ƒ
- æ”¯æŒ Conventional Commits è§„èŒƒ

---

## æ¨ªåˆ‡è´¨é‡ä¸å®‰å…¨åŸºçº¿ï¼ˆå…¨é˜¶æ®µé€‚ç”¨ï¼‰

### Q-1 æ— æ•æ„Ÿä¿¡æ¯è½ç›˜
**DoDï¼š** æ—¥å¿—/DB ä¸å­˜ API Key æˆ–è¯·æ±‚æ­£æ–‡
**éªŒè¯ï¼š** æŠ½æ ·æ£€æŸ¥æ—¥å¿—ä¸ DB
**çŠ¶æ€ï¼š** â˜‘
**å®ç°ç»†èŠ‚ï¼š**
- ä»£ç ä¸­ä½¿ç”¨ `#nosec` æ³¨é‡Šæ ‡è®°å®‰å…¨æ£€æŸ¥
- secrets ä»…åœ¨å­è¿›ç¨‹ç¯å¢ƒå˜é‡ä¸­æ³¨å…¥
- æ•°æ®åº“ä¸å­˜å‚¨å®Œæ•´çš„è¯·æ±‚/å“åº”å†…å®¹

### Q-2 secrets.yaml æƒé™ 0600 å¼ºæ ¡éªŒ
**DoDï¼š** æƒé™ä¸è¶³æ—¶é˜»æ­¢æ‰§è¡Œå¹¶æç¤ºä¿®å¤
**éªŒè¯ï¼š** `chmod 644 secrets.yaml && boba doctor`
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:316-326`
**å®ç°ç»†èŠ‚ï¼š** `boba doctor` æ£€æŸ¥ secrets.yaml æƒé™ï¼Œè­¦å‘Šé 0600 æƒé™

### Q-3 boba doctor å…¨ç»¿æ–¹å¯å‘å¸ƒ
**DoDï¼š** ç½‘ç»œã€å¯†é’¥ã€ä»·æ ¼æºã€DBã€é…ç½®å…¨éƒ¨é€šè¿‡
**éªŒè¯ï¼š** è¿è¡Œ `boba doctor` æ£€æŸ¥æ‰€æœ‰é¡¹
**çŠ¶æ€ï¼š** â˜‘
**éªŒè¯ä½ç½®ï¼š** `internal/cli/root.go:291-374`
**æ£€æŸ¥é¡¹ï¼š**
- Home ç›®å½•æƒé™
- profiles.yaml æœ‰æ•ˆæ€§
- secrets.yaml æƒé™
- routes.yaml æœ‰æ•ˆæ€§
- pricing.yaml æœ‰æ•ˆæ€§
- usage.db å¯è®¿é—®æ€§

### Q-4 æµ‹è¯•è¦†ç›–ç‡é˜ˆå€¼
**DoDï¼š** æ ¸å¿ƒè§£æ/è®¡ç®— â‰¥80%ï¼Œæ€»ä½“ â‰¥60%
**éªŒè¯ï¼š** `go test -cover ./...` è¾¾æ ‡
**çŠ¶æ€ï¼š** â—
**å¤‡æ³¨ï¼š**
- ä»£ç ä¸­å­˜åœ¨å¤§é‡ `_test.go` æ–‡ä»¶
- ç”±äºç½‘ç»œé™åˆ¶æ— æ³•åœ¨å½“å‰ç¯å¢ƒè¿è¡Œæµ‹è¯•
- éœ€è¦åœ¨æœ¬åœ°ç¯å¢ƒéªŒè¯è¦†ç›–ç‡

### Q-5 æ€§èƒ½ç›®æ ‡
**DoDï¼š** boba use â‰¤150msï¼›stats --7d â‰¤200ms
**éªŒè¯ï¼š** åŸºå‡†æµ‹è¯•æˆ–åŸ‹ç‚¹ç»Ÿè®¡
**çŠ¶æ€ï¼š** â˜
**å¤‡æ³¨ï¼š** éœ€è¦æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•å’Œç›‘æ§

---

## ä½¿ç”¨å»ºè®®

1. **å°†æœ¬æ¸…å•ä½œä¸ºå‘å¸ƒå‰æ£€æŸ¥ä¾æ®**
   æ¯ä¸ª PR åˆå¹¶å‰ï¼Œå¯¹ç…§æ¸…å•æ£€æŸ¥ç›¸å…³åŠŸèƒ½æ˜¯å¦å®Œæ•´å®ç°

2. **å¯¹æ¯ä¸€æ¡"â˜‘/â—/â˜"é™„ä¸Šç®€çŸ­è¯æ®**
   - å‘½ä»¤è¾“å‡ºç¤ºä¾‹
   - ä»£ç ä½ç½®å¼•ç”¨
   - æµ‹è¯•ç”¨ä¾‹éªŒè¯ç»“æœ

3. **æ¯ä¸ªé˜¶æ®µç»“æŸå‰ï¼Œç¡®ä¿"æ¨ªåˆ‡è´¨é‡ä¸å®‰å…¨åŸºçº¿"åŒæ­¥æ»¡è¶³**
   å®‰å…¨æ€§å’Œè´¨é‡è¦æ±‚è´¯ç©¿æ‰€æœ‰é˜¶æ®µ

4. **å®šæœŸæ›´æ–°æ ¸æŸ¥æ—¶é—´å’Œç‰ˆæœ¬å·**
   åœ¨æ¸…å•é¡¶éƒ¨è®°å½•æœ€åæ ¸æŸ¥æ—¶é—´å’Œå¯¹åº”çš„ commit hash

---

## æ€»ç»“

### å·²å®ŒæˆåŠŸèƒ½ (â˜‘)
- **Phase 0-2**: åŸºç¡€è®¾æ–½ã€é…ç½®ç³»ç»Ÿã€CLI/TUI æ ¸å¿ƒåŠŸèƒ½ âœ“
- **Phase 3**: HTTP Adapter åŸºæœ¬åŠŸèƒ½ âœ“
- **Phase 4**: Tool Adapter å®Œæ•´å®ç° âœ“
- **Phase 5**: è·¯ç”± DSL å’Œå»ºè®®å¼•æ“ âœ“
- **Phase 6**: ä»·æ ¼è¡¨å¤šæºåŠ è½½å’Œç¼“å­˜ âœ“
- **Phase 7**: é¢„ç®—ç®¡ç†å’Œ TUI å¢å¼º âœ“
- **Phase 8**: Git/Shell é›†æˆ âœ“
- **Phase 9**: æ–‡æ¡£å’Œå‘å¸ƒæµç¨‹ âœ“

### éƒ¨åˆ†å®Œæˆ (â—)
- **Q-4**: æµ‹è¯•è¦†ç›–ç‡ - æµ‹è¯•æ–‡ä»¶å­˜åœ¨ï¼Œéœ€éªŒè¯è¦†ç›–ç‡æŒ‡æ ‡

### å¾…å®ç°åŠŸèƒ½ (â˜)
- **P0-4**: æ—¥å¿—åŸºçº¿ï¼ˆzap æ—¥å¿—ç³»ç»Ÿï¼‰
- **P3-3**: HTTP å¤±è´¥é‡è¯•æœºåˆ¶
- **Q-5**: æ€§èƒ½ç›®æ ‡åŸºå‡†æµ‹è¯•

### ä¼˜å…ˆçº§å»ºè®®

**é«˜ä¼˜å…ˆçº§ï¼ˆå½±å“å‘å¸ƒï¼‰ï¼š**
1. P0-4: å®ç°ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ
2. P3-3: æ·»åŠ  HTTP é‡è¯•æœºåˆ¶
3. Q-4: éªŒè¯å¹¶æå‡æµ‹è¯•è¦†ç›–ç‡

**ä¸­ä¼˜å…ˆçº§ï¼ˆæå‡è´¨é‡ï¼‰ï¼š**
1. Q-5: æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•
2. è¡¥å……é›†æˆæµ‹è¯•ç”¨ä¾‹

**ä½ä¼˜å…ˆçº§ï¼ˆä¼˜åŒ–ä½“éªŒï¼‰ï¼š**
1. å®Œå–„é”™è¯¯ä¿¡æ¯å’Œç”¨æˆ·æç¤º
2. å¢åŠ æ›´å¤šä½¿ç”¨ç¤ºä¾‹å’Œæ–‡æ¡£

---

**æœ€åæ›´æ–°ï¼š** 2025-11-14
**æ ¸æŸ¥äººå‘˜ï¼š** Claude (è‡ªåŠ¨åŒ–ä»£ç åˆ†æ)
